#generated by `web framework`
    
# user www www;
pid tmp/dev-nginx.pid;

# This number should be at maxium the number of CPU on the server
worker_processes 4;

events {
    # Number of connections per worker
    worker_connections 4096;
}

http {
    # use sendfile
    sendfile on;
    # include #NGX_PATH/conf/mime.types;
    lua_shared_dict g_waf 10m;

    # framework initialization
    lua_package_path "./app/?.lua;./app/plugin/?.lua;/usr/local/hi/fw/?.lua;/usr/local/hi/libs/moon/?.lua;./?.lua;/usr/local/hi/?.lua;/usr/local/hi/?/init.lua;;";
    lua_package_cpath "./app/library/?.so;/usr/local/hi/fw/?.so;/usr/local/hi/libs/moon/?.so;/usr/local/hi/?.so;;";
    lua_code_cache off;
    #lua_code_cache on;
    #LUA_SHARED_DICT

    init_by_lua_file ./app/init.lua; 

    server {
        # List port
        listen 8089;
        set $template_root '';

        location /static {
            alias ./app/static; #app/static;
        }

        # Access log with buffer, or disable it completetely if unneeded
        access_log logs/dev-access.log combined buffer=16k;
        # access_log off;

        # Error log
        error_log logs/dev-error.log;

        # framework runtime
        location / {
            resolver 8.8.8.8;  # use Google's open DNS server for an example
            content_by_lua '
                local wario = require "app" 
                wario:run()
            ';
        }
    }
}

    
